{
  "__inputs": [
    {
      "name": "DS_INFLUXDB",
      "label": "InfluxDB",
      "description": "",
      "type": "datasource",
      "pluginId": "influxdb",
      "pluginName": "InfluxDB"
    },
    {
      "name": "DS_ENERGY_CONSUMPTION_CSV",
      "label": "energy_consumption_csv",
      "description": "",
      "type": "datasource",
      "pluginId": "marcusolsson-csv-datasource",
      "pluginName": "CSV"
    }
  ],
  "__elements": {},
  "__requires": [
    {
      "type": "panel",
      "id": "agenty-flowcharting-panel",
      "name": "FlowCharting",
      "version": "0.9.1"
    },
    {
      "type": "panel",
      "id": "gauge",
      "name": "Gauge",
      "version": ""
    },
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "10.2.0"
    },
    {
      "type": "datasource",
      "id": "influxdb",
      "name": "InfluxDB",
      "version": "1.0.0"
    },
    {
      "type": "datasource",
      "id": "marcusolsson-csv-datasource",
      "name": "CSV",
      "version": "0.6.10"
    },
    {
      "type": "panel",
      "id": "piechart",
      "name": "Pie chart",
      "version": ""
    },
    {
      "type": "panel",
      "id": "stat",
      "name": "Stat",
      "version": ""
    },
    {
      "type": "panel",
      "id": "timeseries",
      "name": "Time series",
      "version": ""
    }
  ],
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 17,
      "panels": [],
      "title": "Overview",
      "type": "row"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "continuous-GrYlRd"
          },
          "mappings": [],
          "max": 3999,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "watt"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Battery"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Hausanschluss"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Soc {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "SoC"
              },
              {
                "id": "unit",
                "value": "percent"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 5,
        "w": 10,
        "x": 0,
        "y": 1
      },
      "id": 1,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "vertical",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "pluginVersion": "10.2.0",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Soc\" or r[\"_field\"] == \"Power\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "B"
        }
      ],
      "title": "Power",
      "transformations": [
        {
          "id": "calculateField",
          "options": {
            "alias": "Solar",
            "binary": {
              "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "bothInveters",
            "binary": {
              "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "generation",
            "binary": {
              "left": "bothInveters",
              "operator": "+",
              "right": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Wohnungen_Total",
            "binary": {
              "left": "generation",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Time",
                "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}",
                "Soc {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}",
                "Solar",
                "Wohnungen_Total"
              ]
            }
          }
        }
      ],
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            }
          },
          "mappings": [],
          "unit": "watt"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Buero"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Wohnung_01"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Keller"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 4,
        "x": 10,
        "y": 1
      },
      "id": 24,
      "options": {
        "displayLabels": [
          "value"
        ],
        "legend": {
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "pieType": "donut",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "B"
        }
      ],
      "title": "Panel Title",
      "transformations": [
        {
          "id": "calculateField",
          "options": {
            "alias": "Inverters",
            "binary": {
              "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "generation",
            "binary": {
              "left": "Inverters",
              "operator": "+",
              "right": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "TotalPower",
            "binary": {
              "left": "generation",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "BueroUKeller",
            "binary": {
              "left": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "BueroKellerWohn1",
            "binary": {
              "left": "BueroUKeller",
              "operator": "+",
              "right": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Wohnung_02",
            "binary": {
              "left": "TotalPower",
              "operator": "-",
              "right": "BueroKellerWohn1"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Time",
                "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Wohnung_02"
              ]
            }
          }
        }
      ],
      "type": "piechart"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "mamp"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Current {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Inverter 01"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Current {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Inverter 02"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 14,
        "y": 1
      },
      "id": 22,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "auto"
      },
      "pluginVersion": "10.2.0",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"PvString\")\r\n  |> filter(fn: (r) => r[\"device_name\"] == \"sunnytripower10se\" or r[\"device_name\"] == \"sunnytripower4\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Current\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        }
      ],
      "title": "Voltage",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "watth"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 21,
        "y": 1
      },
      "id": 23,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "diff"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "10.2.0",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"device_name\"] == \"hausanschluss\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"EnergyIn\")\r\n  |> map(fn: (r) => ({r with _value: r._value /3600}))\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        }
      ],
      "title": "Exported Power",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "mvolt"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Voltage {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Inverter 01"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Voltage {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Inverter 02"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 14,
        "y": 5
      },
      "id": 21,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "auto"
      },
      "pluginVersion": "10.2.0",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"PvString\")\r\n  |> filter(fn: (r) => r[\"device_name\"] == \"sunnytripower10se\" or r[\"device_name\"] == \"sunnytripower4\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Voltage\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        }
      ],
      "title": "Voltage",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            }
          },
          "mappings": [],
          "min": 0,
          "unit": "watth"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "EnergyOut {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Hausanschluss"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "EnergyOut {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Battery"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "EnergyOut {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Solar"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 4,
        "x": 20,
        "y": 5
      },
      "id": 20,
      "options": {
        "displayLabels": [
          "value"
        ],
        "legend": {
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true,
          "values": []
        },
        "pieType": "donut",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"EnergyOut\")\r\n  |> filter(fn: (r) => r[\"device_id\"] == \"meter_004\" or r[\"device_id\"] == \"inverter_001\" or r[\"device_id\"] == \"inverter_002\")\r\n  |> map(fn: (r) => ({r with _value: r._value /3600}))\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        }
      ],
      "title": "EnergySources",
      "transformations": [],
      "type": "piechart"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "flowchartsData": {
        "flowcharts": [
          {
            "allowDrawio": false,
            "center": true,
            "csv": "## See more information for the syntax at https://drawio-app.com/import-from-csv-to-drawio/\n##\n## Example CSV. Use ## for comments and # for configuration.\n## The following names are reserved and should not be used (or ignored):\n## id, tooltip, placeholder(s), link and label (see below)\n##\n#\n## Node label with placeholders and HTML.\n## Default is '%name_of_first_column%'.\n#\n# label: %name%<br><i style=\"color:gray;\">%position%</i><br><a href=\"mailto:%email%\">Email</a>\n#\n## Node style (placeholders are replaced once).\n## Default is the current style for nodes.\n#\n# style: label;image=%image%;whiteSpace=wrap;html=1;rounded=1;fillColor=%fill%;strokeColor=%stroke%;\n#\n## Parent style for nodes with child nodes (placeholders are replaced once).\n#\n# parentstyle: swimlane;whiteSpace=wrap;html=1;childLayout=stackLayout;horizontal=1;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;\n#\n## Optional column name that contains a reference to a named style in styles.\n## Default is the current style for nodes.\n#\n# stylename: -\n#\n## JSON for named styles of the form {\"name\": \"style\", \"name\": \"style\"} where style is a cell style with\n## placeholders that are replaced once.\n#\n# styles: -\n#\n## Optional column name that contains a reference to a named label in labels.\n## Default is the current label.\n#\n# labelname: -\n#\n## JSON for named labels of the form {\"name\": \"label\", \"name\": \"label\"} where label is a cell label with\n## placeholders.\n#\n# labels: -\n#\n## Uses the given column name as the identity for cells (updates existing cells).\n## Default is no identity (empty value or -).\n#\n# identity: -\n#\n## Uses the given column name as the parent reference for cells. Default is no parent (empty or -).\n## The identity above is used for resolving the reference so it must be specified.\n#\n# parent: -\n#\n## Adds a prefix to the identity of cells to make sure they do not collide with existing cells (whose\n## IDs are numbers from 0..n, sometimes with a GUID prefix in the context of realtime collaboration).\n## Default is csvimport-.\n#\n# namespace: csvimport-\n#\n## Connections between rows (\"from\": source colum, \"to\": target column).\n## Label, style and invert are optional. Defaults are '', current style and false.\n## If placeholders are used in the style, they are replaced with data from the source.\n## An optional placeholders can be set to target to use data from the target instead.\n## In addition to label, an optional fromlabel and tolabel can be used to name the column\n## that contains the text for the label in the edges source or target (invert ignored).\n## The label is concatenated in the form fromlabel + label + tolabel if all are defined.\n## The target column may contain a comma-separated list of values.\n## Multiple connect entries are allowed.\n#\n# connect: {\"from\": \"manager\", \"to\": \"name\", \"invert\": true, \"label\": \"manages\", \\\n#          \"style\": \"curved=1;endArrow=blockThin;endFill=1;fontSize=11;\"}\n# connect: {\"from\": \"refs\", \"to\": \"id\", \"style\": \"curved=1;fontSize=11;\"}\n#\n## Node x-coordinate. Possible value is a column name. Default is empty. Layouts will\n## override this value.\n#\n# left: \n#\n## Node y-coordinate. Possible value is a column name. Default is empty. Layouts will\n## override this value.\n#\n# top: \n#\n## Node width. Possible value is a number (in px), auto or an @ sign followed by a column\n## name that contains the value for the width. Default is auto.\n#\n# width: auto\n#\n## Node height. Possible value is a number (in px), auto or an @ sign followed by a column\n## name that contains the value for the height. Default is auto.\n#\n# height: auto\n#\n## Padding for autosize. Default is 0.\n#\n# padding: -12\n#\n## Comma-separated list of ignored columns for metadata. (These can be\n## used for connections and styles but will not be added as metadata.)\n#\n# ignore: id,image,fill,stroke,refs,manager\n#\n## Column to be renamed to link attribute (used as link).\n#\n# link: url\n#\n## Spacing between nodes. Default is 40.\n#\n# nodespacing: 40\n#\n## Spacing between levels of hierarchical layouts. Default is 100.\n#\n# levelspacing: 100\n#\n## Spacing between parallel edges. Default is 40. Use 0 to disable.\n#\n# edgespacing: 40\n#\n## Name or JSON of layout. Possible values are auto, none, verticaltree, horizontaltree,\n## verticalflow, horizontalflow, organic, circle or a JSON string as used in Layout, Apply.\n## Default is auto.\n#\n# layout: auto\n#\n## ---- CSV below this line. First line are column names. ----\nname,position,id,location,manager,email,fill,stroke,refs,url,image\nEvan Miller,CFO,emi,Office 1,,me@example.com,#dae8fc,#6c8ebf,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-9-2-128.png\nEdward Morrison,Brand Manager,emo,Office 2,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-10-3-128.png\nRon Donovan,System Admin,rdo,Office 3,Evan Miller,me@example.com,#d5e8d4,#82b366,\"emo,tva\",https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-2-128.png\nTessa Valet,HR Director,tva,Office 4,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-3-128.png\n",
            "download": false,
            "editorTheme": "dark",
            "editorUrl": "https://www.draw.io",
            "enableAnim": true,
            "grid": false,
            "lock": true,
            "name": "Main",
            "scale": true,
            "tooltip": true,
            "type": "xml",
            "url": "http://<YourUrl>/<Your XML/drawio file/api>",
            "xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mxfile host=\"app.diagrams.net\" modified=\"2023-11-12T09:34:39.394Z\" agent=\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36\" etag=\"UmHrKgYAx9ddYJ6goiiG\" version=\"22.1.0\" type=\"device\"><diagram id=\"C5RBs43oDa-KdzZeNtuy\" name=\"Page-1\">7Zvdl5o6EMD/Gh/tAYKIj9X96nbba8/u7Xaf9kSIwBqIN8YP9q+/CYRvdO05VbHyJDMJgcxvZjKJ2gEjf3NL4dz9RmyEO5pibzrgqqNpqtnv8w+hCWNNzzRihUM9W3bKFI/eO5JKRWqXno0WhY6MEMy8eVFpkSBAFivoIKVkXew2Jbj41Dl0UEXxaEFc1T57NnNjran1M/0d8hw3ebJqDOIWHyad5UwWLrTJOqcC1x0wooSw+MrfjBAWxkvs8vwlfMYPM+P2/sfiP/jv8OvT95/deLCb37klnQJFAfuzQ2vx0CuIl9Jecq4sTAxIyTKwkRhE6YChy3zML1V++YYYCyVwuGSEqwhlLnFIAPEDIXPZb0oCJrupQkaB/VmA5fIEE2sWq248jOUzFoySWUpL3JKaXjRjOEF4CK2ZE73aiGBCeVNAAiSGsjl++fbZ61xnWjHYXLROMdrIFxlO+dOTgToasCEyp1b6KrkWwzLRZMpb9mQi2S3IklpoRz8gQwNSB+0aTwafmGXOvyXxW0R8xGjIO1CEIfNWxSCAMpactF/mL/xCusxvuA+ouM8jwZBy1RgGIpFs9SVBde16DD3OYWSYNU8/Rf/K+w2f4tDBcLHYz0UOjXOFKEObnQCSVkNmD5k+E3Gd5SI1STBuLg/pyoGQGXtEvEv8yXLxMaGizTmuG+h7WMz0DuEVYp4FazhC7DkBFyxuakTrYfJHeoHDJSOTnqKM0tWbxbdf5JvKecBKDWDzDwBeflHgy8vqF2a++f5g3c97wU06hR2AP86RxaRfm9Zr0n/RNZqXZPtnmWT7FaDfEXtvc6sGenox9gZHTK5PXasbvNnm4u5HqF2Nvq2VB1tWYG3sbY+pD2NPVU8VfPXZ1DgFQW5yGv4S93/qJeKLHC4SrjYFKUxCt4nkE6J59PW21puF3jwJ+o3HYvJ9w5RyhP7TQDeknNEXQpgTxoh6fPairPobHAI0yyEG55QLMkfSgF50JNC7NEfSGuVI6YnSWTjSmaM/WT2x871zJeId5HvttpovbaSBWi3mQd1G+mDF/B5no5dazCf59Mx20moV6RAyvsh5qA1ArQtKR1kn305Xj5fFycfruAKLz5CVwmar+bYZvHIsKSznWRB/lg2+Z9tRTNc5QzHOD4UoPTVMENUcJxs1hMChDhurARV9AXDBiNReCVHNOnZURNUgEgXHBRPSSoTqvpM5KiG9dlW6YEKDUgj1TgyopmifLBElbdGgdUtlu64dsWjYudfPwZrx27ivt7TMxsGqrk5r4gbLwFHUlldm+OYAqy5WCbDq9vjygIHB8YCRyZv4wZymRD+IKixLBhZ1woSnPMNh6XQTsFGn1zFZxzmxSP8Cy41uCRo4XEHIRYltK0IRTtq4SOw5CbGWWkpN7+sNohaXGCVssbJlljIzmhZo6pZAU1to2ZqmNYlatDV+JKMit/gYNxQNr4p62diSYw39WJgqlaM/M6/70/t/xiviqoPZT9vYqDW/jTqvo8KK5feFtr26Lx+4H+6okIvZHxWittzfPcD1/w==</diagram></mxfile>",
            "zoom": "100%"
          }
        ]
      },
      "format": "short",
      "graphId": "flowchart_13",
      "gridPos": {
        "h": 12,
        "w": 10,
        "x": 0,
        "y": 6
      },
      "id": 13,
      "newFlag": false,
      "rulesData": {
        "rulesData": [
          {
            "aggregation": "current",
            "alias": "Solar_Power",
            "colors": [
              "rgba(245, 54, 54, 0.9)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(50, 172, 45, 0.97)"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 1,
            "overlayIcon": false,
            "pattern": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "uI0aYYvXltm8zLcJp5nF-2",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [
              {
                "hidden": false,
                "pattern": "uI0aYYvXltm8zLcJp5nF-2",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              50,
              80
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": true,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "watt",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "Battery_Power",
            "colors": [
              "#C4162A",
              "#FF780A",
              "#37872D"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 2,
            "overlayIcon": false,
            "pattern": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"Power_Bat\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "uI0aYYvXltm8zLcJp5nF-4",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [],
            "textData": [
              {
                "hidden": false,
                "pattern": "uI0aYYvXltm8zLcJp5nF-4",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              -1,
              1
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "watt",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "Battery_SoC",
            "colors": [
              "rgba(245, 54, 54, 0.9)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(50, 172, 45, 0.97)"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 3,
            "overlayIcon": false,
            "pattern": "Soc {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"Power_Bat\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "Battery_SoC_01",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [
              {
                "hidden": false,
                "pattern": "Battery_SoC_01",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              30,
              70
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "percent",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "Netz_Power",
            "colors": [
              "#73BF69",
              "rgba(237, 129, 40, 0.89)",
              "#C4162A"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 4,
            "overlayIcon": false,
            "pattern": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "T-c-njd8sHQy2DCMw0Ld-3",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [
              {
                "hidden": false,
                "pattern": "T-c-njd8sHQy2DCMw0Ld-3",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              -10,
              1000
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "watt",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "Buero",
            "colors": [
              "#37872D",
              "#FF9830",
              "#F2495C"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 5,
            "overlayIcon": false,
            "pattern": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "buero_Power",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [
              {
                "hidden": false,
                "pattern": "buero_Power",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              1000,
              2000
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "watt",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "Keller",
            "colors": [
              "#73BF69",
              "#FADE2A",
              "#F2495C"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 6,
            "overlayIcon": false,
            "pattern": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "keller_Power",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [
              {
                "hidden": false,
                "pattern": "keller_Power",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              1000,
              2000
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "watt",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "Wohn01",
            "colors": [
              "#73BF69",
              "rgba(237, 129, 40, 0.89)",
              "#F2495C"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 7,
            "overlayIcon": false,
            "pattern": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "Wohnung01_Power",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [
              {
                "hidden": false,
                "pattern": "Wohnung01_Power",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              1000,
              2000
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "watt",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "SolarP2",
            "colors": [
              "rgba(245, 54, 54, 0.9)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(50, 172, 45, 0.97)"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 8,
            "overlayIcon": false,
            "pattern": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\"}",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [
              {
                "colorOn": "a",
                "hidden": false,
                "pattern": "mk8E7fJOPvoh19kVd6x1-0",
                "style": "fillColor"
              }
            ],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [
              {
                "hidden": false,
                "pattern": "mk8E7fJOPvoh19kVd6x1-0",
                "textOn": "wmd",
                "textPattern": "/.*/",
                "textReplace": "content"
              }
            ],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              50,
              80
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "watt",
            "valueData": []
          },
          {
            "aggregation": "current",
            "alias": "myRule",
            "colors": [
              "rgba(245, 54, 54, 0.9)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(50, 172, 45, 0.97)"
            ],
            "column": "Time",
            "dateFormat": "YYYY-MM-DD HH:mm:ss",
            "decimals": 2,
            "eventData": [],
            "eventProp": "id",
            "eventRegEx": false,
            "gradient": false,
            "hidden": false,
            "invert": false,
            "linkData": [],
            "linkProp": "id",
            "linkRegEx": true,
            "mappingType": 1,
            "metricType": "serie",
            "order": 9,
            "overlayIcon": false,
            "pattern": "",
            "rangeData": [],
            "reduce": true,
            "refId": "A",
            "sanitize": false,
            "shapeData": [],
            "shapeProp": "id",
            "shapeRegEx": true,
            "stringThresholds": [
              "/.*/",
              "/.*/"
            ],
            "textData": [],
            "textProp": "id",
            "textRegEx": true,
            "thresholds": [
              50,
              80
            ],
            "tooltip": false,
            "tooltipColors": false,
            "tooltipLabel": "",
            "tooltipOn": "a",
            "tpDirection": "v",
            "tpGraph": false,
            "tpGraphScale": "linear",
            "tpGraphSize": "100%",
            "tpGraphType": "line",
            "type": "number",
            "unit": "short",
            "valueData": []
          }
        ]
      },
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\" or r[\"_field\"] == \"Soc\")\r\n  |> set(key: \"device_type\", value: \"Power_Bat\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "B"
        }
      ],
      "title": "Panel Title",
      "transformations": [],
      "type": "agenty-flowcharting-panel",
      "valueName": "current",
      "version": "0.9.0"
    },
    {
      "datasource": {
        "type": "mixed",
        "uid": "-- Mixed --"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 25,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "watt"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Buero"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Wohung_01"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Keller"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": true,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": true,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": true,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "WonOBue"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": true,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "WonOBueUW1"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": true,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Inverter"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": true,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "WohnungenTotal"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": true,
                  "viz": false
                }
              },
              {
                "id": "custom.stacking",
                "value": {
                  "group": "A",
                  "mode": "none"
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 5,
        "x": 10,
        "y": 9
      },
      "id": 25,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "pluginVersion": "10.2.0",
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\" or r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "PowerUsage"
        }
      ],
      "title": "Power Usage",
      "transformations": [
        {
          "id": "calculateField",
          "options": {
            "alias": "Inverter",
            "binary": {
              "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "EnergyIn",
            "binary": {
              "left": "Inverter",
              "operator": "+",
              "right": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "WohnungenTotal",
            "binary": {
              "left": "EnergyIn",
              "operator": "-",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "WonOBue",
            "binary": {
              "left": "WohnungenTotal",
              "operator": "-",
              "right": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "WonOBueUW1",
            "binary": {
              "left": "WonOBue",
              "operator": "-",
              "right": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Wohnung_02",
            "binary": {
              "left": "WonOBueUW1",
              "operator": "-",
              "right": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Time",
                "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "WohnungenTotal",
                "Wohnung_02"
              ]
            }
          }
        }
      ],
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Mixed --"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "watt"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Hausanschluss"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Battery"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "WohnungenTotal"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Prediction"
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    0,
                    10
                  ],
                  "fill": "dot"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 9,
        "w": 5,
        "x": 15,
        "y": 9
      },
      "id": 18,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_name\"] == \"sunnytripower4\" or r[\"device_name\"] == \"sunnytripower10se\" or r[\"device_name\"] == \"hausanschluss\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> map(fn: (r) => ({ r with _value: r._value  * -1 }))\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "B"
        },
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "hide": false,
          "ignoreUnknown": false,
          "path": "csv_exports/out.csv",
          "refId": "C",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Power",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        }
      ],
      "title": "Power Souces",
      "transformations": [
        {
          "id": "calculateField",
          "options": {
            "alias": "Solar",
            "binary": {
              "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "PowerIn",
            "binary": {
              "left": "Solar",
              "operator": "+",
              "right": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "WohnungenTotal",
            "binary": {
              "left": "PowerIn",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Time",
                "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}",
                "Power {name=\"pi-grafana\"}",
                "Solar",
                "WohnungenTotal"
              ]
            }
          }
        }
      ],
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "influxdb",
        "uid": "${DS_INFLUXDB}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "continuous-RdYlGr",
            "seriesBy": "last"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "dark-red",
                "value": null
              },
              {
                "color": "#EAB839",
                "value": 11
              },
              {
                "color": "green",
                "value": 80
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 3,
        "x": 21,
        "y": 13
      },
      "id": 14,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "table",
          "placement": "bottom",
          "showLegend": false
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Soc\")\r\n  |> filter(fn: (r) => r[\"device_id\"] == \"inverter_002\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        }
      ],
      "title": "Battery SoC",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Mixed --"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "watt"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Hausanschluss"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Battery"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "WohnungenTotal"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Prediction"
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    0,
                    10
                  ],
                  "fill": "dot"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Energy_Diff {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Forecast {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Energy_Diff {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Solar_Predict"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Forecast {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Power_Predict"
              }
            ]
          },
          {
            "__systemRef": "hideSeriesFrom",
            "matcher": {
              "id": "byNames",
              "options": {
                "mode": "exclude",
                "names": [
                  "HausUSolar",
                  "Power_Predict"
                ],
                "prefix": "All except:",
                "readOnly": true
              }
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 13,
        "w": 24,
        "x": 0,
        "y": 18
      },
      "id": 29,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_name\"] == \"sunnytripower4\" or r[\"device_name\"] == \"sunnytripower10se\" or r[\"device_name\"] == \"hausanschluss\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> map(fn: (r) => ({ r with _value: r._value  * -1 }))\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "B"
        },
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "hide": false,
          "ignoreUnknown": false,
          "path": "csv_exports/out.csv",
          "refId": "C",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Power",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        },
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "hide": false,
          "ignoreUnknown": false,
          "path": "predictions/pv.csv",
          "refId": "D",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Energy_Diff",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        },
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "hide": false,
          "ignoreUnknown": false,
          "path": "predictions/consumption.csv",
          "refId": "E",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Forecast",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        }
      ],
      "title": "Power Souces",
      "transformations": [
        {
          "id": "calculateField",
          "options": {
            "alias": "Solar",
            "binary": {
              "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "PowerIn",
            "binary": {
              "left": "Solar",
              "operator": "+",
              "right": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "WohnungenTotal",
            "binary": {
              "left": "PowerIn",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "HausUSolar",
            "binary": {
              "left": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Solar"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Time",
                "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}",
                "Power {name=\"pi-grafana\"}",
                "Energy_Diff {name=\"pi-grafana\"}",
                "Forecast {name=\"pi-grafana\"}",
                "Solar",
                "WohnungenTotal",
                "HausUSolar"
              ]
            }
          }
        }
      ],
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Mixed --"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "watt"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Hausanschluss"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Battery"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "WohnungenTotal"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Power {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Prediction"
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    0,
                    10
                  ],
                  "fill": "dot"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Energy_Diff {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Forecast {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Energy_Diff {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Solar_Predict"
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Forecast {name=\"pi-grafana\"}"
            },
            "properties": [
              {
                "id": "displayName",
                "value": "Power_Predict"
              }
            ]
          },
          {
            "__systemRef": "hideSeriesFrom",
            "matcher": {
              "id": "byNames",
              "options": {
                "mode": "exclude",
                "names": [
                  "Solar",
                  "Solar_Predict"
                ],
                "prefix": "All except:",
                "readOnly": true
              }
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 13,
        "w": 24,
        "x": 0,
        "y": 31
      },
      "id": 30,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_name\"] == \"sunnytripower4\" or r[\"device_name\"] == \"sunnytripower10se\" or r[\"device_name\"] == \"hausanschluss\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "hide": false,
          "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> map(fn: (r) => ({ r with _value: r._value  * -1 }))\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
          "refId": "B"
        },
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "hide": false,
          "ignoreUnknown": false,
          "path": "csv_exports/out.csv",
          "refId": "C",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Power",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        },
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "hide": false,
          "ignoreUnknown": false,
          "path": "predictions/pv.csv",
          "refId": "D",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Energy_Diff",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        },
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "hide": false,
          "ignoreUnknown": false,
          "path": "predictions/consumption.csv",
          "refId": "E",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Forecast",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        }
      ],
      "title": "Power Souces",
      "transformations": [
        {
          "id": "calculateField",
          "options": {
            "alias": "Solar",
            "binary": {
              "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "PowerIn",
            "binary": {
              "left": "Solar",
              "operator": "+",
              "right": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "WohnungenTotal",
            "binary": {
              "left": "PowerIn",
              "operator": "+",
              "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "HausUSolar",
            "binary": {
              "left": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}",
              "operator": "+",
              "right": "Solar"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "Time",
                "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}",
                "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}",
                "Power {name=\"pi-grafana\"}",
                "Energy_Diff {name=\"pi-grafana\"}",
                "Forecast {name=\"pi-grafana\"}",
                "Solar",
                "WohnungenTotal",
                "HausUSolar"
              ]
            }
          }
        }
      ],
      "type": "timeseries"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 44
      },
      "id": 16,
      "panels": [
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "watt"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Buero"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Wohung_01"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Keller"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "WonOBue"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "WonOBueUW1"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Inverter"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "WohnungenTotal"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.stacking",
                    "value": {
                      "group": "A",
                      "mode": "none"
                    }
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        10,
                        10
                      ],
                      "fill": "dash"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 9,
            "w": 5,
            "x": 0,
            "y": 27
          },
          "id": 2,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "10.2.0",
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "${DS_INFLUXDB}"
              },
              "query": "buero = from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_id\"] == \"meter_001\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "influxdb",
                "uid": "${DS_INFLUXDB}"
              },
              "hide": false,
              "query": "keller = from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_id\"] == \"meter_002\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "B"
            },
            {
              "datasource": {
                "type": "influxdb",
                "uid": "${DS_INFLUXDB}"
              },
              "hide": false,
              "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_id\"] == \"meter_003\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "C"
            },
            {
              "datasource": {
                "type": "influxdb",
                "uid": "${DS_INFLUXDB}"
              },
              "hide": false,
              "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_name\"] == \"sunnytripower4\" or r[\"device_name\"] == \"sunnytripower10se\" or r[\"device_name\"] == \"hausanschluss\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "D"
            },
            {
              "datasource": {
                "type": "influxdb",
                "uid": "${DS_INFLUXDB}"
              },
              "hide": false,
              "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"Battery\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "E"
            }
          ],
          "title": "Power Usage",
          "transformations": [
            {
              "id": "calculateField",
              "options": {
                "alias": "Inverter",
                "binary": {
                  "left": "Power {device_id=\"inverter_001\", device_name=\"sunnytripower4\", device_type=\"inverter\", name=\"EnergyMeter\"}",
                  "operator": "+",
                  "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"EnergyMeter\"}"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "EnergyIn",
                "binary": {
                  "left": "Inverter",
                  "operator": "+",
                  "right": "Power {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "WohnungenTotal",
                "binary": {
                  "left": "EnergyIn",
                  "operator": "-",
                  "right": "Power {device_id=\"inverter_002\", device_name=\"sunnytripower10se\", device_type=\"inverter\", name=\"Battery\"}"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "WonOBue",
                "binary": {
                  "left": "WohnungenTotal",
                  "operator": "-",
                  "right": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "WonOBueUW1",
                "binary": {
                  "left": "WonOBue",
                  "operator": "-",
                  "right": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Wohnung_02",
                "binary": {
                  "left": "WonOBueUW1",
                  "operator": "-",
                  "right": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}"
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Time",
                    "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\", name=\"EnergyMeter\"}",
                    "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\", name=\"EnergyMeter\"}",
                    "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\", name=\"EnergyMeter\"}",
                    "WohnungenTotal",
                    "Wohnung_02"
                  ]
                }
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"meter_001\", device_name=\"buero\", device_type=\"meter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Buero"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"meter_002\", device_name=\"wohnung01\", device_type=\"meter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Wohnung 01"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Power {device_id=\"meter_003\", device_name=\"keller\", device_type=\"meter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Keller"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 10,
            "x": 11,
            "y": 27
          },
          "id": 15,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "${DS_INFLUXDB}"
              },
              "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"Power\")\r\n  |> filter(fn: (r) => r[\"device_id\"] == \"meter_003\" or r[\"device_id\"] == \"meter_002\" or r[\"device_id\"] == \"meter_001\")\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Power Usage",
          "transformations": [],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "influxdb",
            "uid": "${DS_INFLUXDB}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "mappings": [],
              "unit": "watth"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "EnergyIn {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "EnergyIn"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "EnergyOut {device_id=\"meter_004\", device_name=\"hausanschluss\", device_type=\"meter\"}"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "EnergyOut"
                  }
                ]
              },
              {
                "__systemRef": "hideSeriesFrom",
                "matcher": {
                  "id": "byNames",
                  "options": {
                    "mode": "exclude",
                    "names": [
                      "EnergyOut"
                    ],
                    "prefix": "All except:",
                    "readOnly": true
                  }
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 6,
            "w": 5,
            "x": 4,
            "y": 36
          },
          "id": 19,
          "options": {
            "displayLabels": [
              "percent"
            ],
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true,
              "values": [
                "value"
              ]
            },
            "pieType": "donut",
            "reduceOptions": {
              "calcs": [
                "delta"
              ],
              "fields": "",
              "values": false
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "influxdb",
                "uid": "${DS_INFLUXDB}"
              },
              "query": "from(bucket: \"energydata\")\r\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\r\n  |> filter(fn: (r) => r[\"_measurement\"] == \"EnergyMeter\")\r\n  |> filter(fn: (r) => r[\"_field\"] == \"EnergyIn\" or r[\"_field\"] == \"EnergyOut\")\r\n  |> filter(fn: (r) => r[\"device_id\"] == \"meter_004\")\r\n  |> map(fn: (r) => ({r with _value: r._value /3600}))\r\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\r\n  |> yield(name: \"mean\")",
              "refId": "A"
            }
          ],
          "title": "Hausanschluss",
          "transformations": [],
          "type": "piechart"
        }
      ],
      "title": "Row title",
      "type": "row"
    },
    {
      "datasource": {
        "type": "marcusolsson-csv-datasource",
        "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 6,
        "x": 1,
        "y": 45
      },
      "id": 26,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "ignoreUnknown": false,
          "path": "predictions/pv.csv",
          "refId": "A",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Energy_Diff",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        }
      ],
      "title": "Panel Title",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "marcusolsson-csv-datasource",
        "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "insertNulls": false,
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 7,
        "x": 7,
        "y": 45
      },
      "id": 27,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "marcusolsson-csv-datasource",
            "uid": "${DS_ENERGY_CONSUMPTION_CSV}"
          },
          "decimalSeparator": ".",
          "delimiter": ",",
          "header": true,
          "ignoreUnknown": false,
          "path": "predictions/consumption.csv",
          "refId": "A",
          "schema": [
            {
              "name": "Time",
              "type": "time"
            },
            {
              "name": "Forecast",
              "type": "number"
            }
          ],
          "skipRows": 0,
          "timezone": "Europe/Berlin"
        }
      ],
      "title": "Panel Title",
      "type": "timeseries"
    }
  ],
  "refresh": "5s",
  "schemaVersion": 38,
  "tags": [],
  "templating": {
    "list": []
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "",
  "title": "I2oT-Energy",
  "uid": "f58f1ba5-8858-489b-adec-23f1ed556029",
  "version": 97,
  "weekStart": ""
}